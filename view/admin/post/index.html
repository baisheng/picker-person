{% extends "../_layout.html" %}
    {% block style %}
        <link rel="stylesheet" href="/static/style.css">
    {% endblock %}


{% block right_nav %}
    <li><a class="" href="/admin/posts/resume"><i class="icon-plus22 position-left"></i>文章</a></li>

{% endblock %}
{% block navbar2 %}
    <!-- Second navbar -->
    <div class="navbar navbar-default alpha-grey" id="navbar-second" v-cloak>
        <ul class="nav navbar-nav no-border visible-xs-block ">
            <li><a class=" collapsed pull-left" href="/admin/posts"><i class="icon-arrow-left7"></i></a></li>

            <li><a class=" collapsed pull-right" data-toggle="collapse" data-target="#navbar-second-toggle"><i
                            class="icon-circle-down2"></i></a></li>
        </ul>

        <div class="navbar-collapse collapse" id="navbar-second-toggle">
            <ul class="nav navbar-nav ">
                <li class="visible-lg-block"><a href="/admin/posts"><i class="text-primary icon-arrow-left7"></i></a>
                </li>
                <li class="disabled" style="width: 120px;">
                    {#<a><i class="text-primary-400 icon-sync spinner position-left"></i>内容自动保存</a>#}
                    <a v-if="status == 'saving'" class="text-teal" v-cloak>
                        <i class="icon-sync spinner position-left"></i>
                        保存中
                    </a>
                    <a v-else-if="status == 'success'" class="text-muted" v-cloak>
                        已保存
                    </a>
                    <a v-else-if="status == 'editing'" v-cloak>修改中</a>
                    <a v-else-if="status == 'init'" class="text-muted">内容自动保存</a>
                </li>

            </ul>

            <ul class="nav navbar-nav navbar-right">
                {#<a class="sidebar-control sidebar-opposite-toggle hidden-xs">#}
                {#<i class="icon-indent-decrease2"></i>#}
                {#</a>#}
                <li class="disabled"><a class=""><i class="icon-eye position-left"></i> 预览</a></li>
                <li class=""><a class="sidebar-control sidebar-opposite-toggle hidden-xs"><i
                                class="icon-cog position-left"></i> 文章设置</a></li>
                <li class="disabled"><a><i class=" icon-paperplane position-left"></i> 发布</a></li>
            </ul>
        </div>
    </div>
    <!-- /second navbar -->
{% endblock %}

{% block sidebar_main %}{% endblock %}

{% block content %}
    {#{{ post.snippets }}#}
    <div class="row">
        <div class="col-md-offset-2 col-md-8">
            <Editor></Editor>
            {#{{editorModel}}#}
            {#<vue-editor :model="editorModel" v-on:modelchange="modelChangeEvent"> </vue-editor>#}
            <!-- Single mail -->
            <!-- /single mail -->
            {#</form>#}
        </div>
    </div>

{% endblock %}


{% block opposite_sidebar %}

    <div class="sidebar sidebar-opposite sidebar-default">
        <div class="sidebar-content">

            <!-- Title -->
            <div class="category-title h6">
                <span>文章设置</span>

                <ul class="icons-list">
                    <li><a class="sidebar-control sidebar-opposite-toggle hidden-xs"><i class=" icon-cross2"></i></a>
                    </li>

                </ul>
            </div>
            <!-- /title -->

            <!-- Quick settings -->
            <div class="sidebar-category">
                <div class="category-title category-collapsed">
                    <span>状态</span>
                    <ul class="icons-list">
                        <li><a href="#" data-action="collapse"></a></li>
                    </ul>
                </div>

                <div class="category-content " style="display: none;">
                    <form action="#">
                        <div class="form-group">
                            {#
                            <div class="checkbox checkbox-switchery checkbox-right switchery-xs ">
                                <label class="display-block">
                                    <input type="checkbox" class="switchery switchery-primary" >
                                    固定到头版

                                </label>
                            </div>
                            #}
                            <div class="checkbox checkbox-switchery checkbox-right switchery-xs ">
                                <label class="display-block">
                                    <input type="checkbox" v-bind:true-value="'pending'" v-bind:false-value="''"
                                           class="switchery switchery-primary" v-model="post.status">
                                    待审核

                                </label>
                            </div>

                            {#
                            <label class="display-block">

                                <div class="btn-group pull-right">
                                    <a href="#" class="" data-toggle="dropdown" aria-expanded="false"><i class="icon-eye position-left"></i>公开 </a>

                                    <ul class="dropdown-menu dropdown-menu-right">
                                        <li class="radio ">
                                            <label>
                                                <input type="radio" name="dropdown-radio" class="styled" v-model="post.status" v-bind:value="'publish'">
                                                公开
                                            </label></li>
                                        <li class="radio"><label><input type="radio" name="dropdown-radio" class="styled" v-model="post.status" v-bind:value="'private'"> 私密</label></li>
                                        <li class="radio"><label><input type="radio" name="dropdown-radio" class="styled" v-model="post.password"> 加密</label></li>

                                    </ul>
                                </div>
                                可见性

                            </label>
                            #}
                        </div>

                    </form>
                </div>
            </div>
            <!-- /quick settings -->

            <!-- /sub navigation -->
            <div class="sidebar-category">
                <div class="category-title category-collapsed">
                    <span>类别与标签
                        <code class="position-left" v-if="checkedCates.length > 0">{{ checkedCates.length }} 类别
                        </code>
</span>
                    {#<label class="text-semibold">Left stacked default</label>#}

                    <ul class="icons-list">
                        <li><a href="#" data-action="collapse"></a></li>
                    </ul>
                </div>

                <div class="category-content" style="display: none;">

                    <div class="form-group">

                        {#<label class="text-semibold">Left stacked default</label>#}
                        {#<li v-for="cate in category"><a :href="cate.id">{{ cate.name }}</a></li>#}

                        <div class="checkbox" v-for="cate in category">
                            <label>
                                <input type="checkbox" :id="cate.id" v-bind:value="cate" v-model="post.terms"
                                       @click="check(cate)">
                                {{ cate.name }}
                            </label>
                        </div>

                    </div>
                    <a class=" btn btn-link btn-xs no-padding"><i class="icon-folder position-left"></i>添加新分类目录</a>

                </div>
            </div>


            <!-- Quick stats -->
            <div class="sidebar-category">
                <div class="category-title category-collapsed">
                    <span>特色图片</span>
                    <ul class="icons-list">
                        <li><a href="#" data-action="collapse"></a></li>
                    </ul>
                </div>

                <div class="category-content" style="display: none;">
                    <ul class="progress-list">
                        <li>
                            <label>CPU usage <span>50%</span></label>
                            <div class="progress progress-xxs">
                                <div class="progress-bar progress-bar-info" style="width: 50%">
                                    <span class="sr-only">50% Complete</span>
                                </div>
                            </div>
                        </li>
                        <li>
                            <label>RAM usage <span>70%</span></label>
                            <div class="progress progress-xxs">
                                <div class="progress-bar progress-bar-danger" style="width: 70%">
                                    <span class="sr-only">70% Complete</span>
                                </div>
                            </div>
                        </li>
                        <li>
                            <label>Disc space <span>80%</span></label>
                            <div class="progress progress-xxs">
                                <div class="progress-bar progress-bar-success" style="width: 80%">
                                    <span class="sr-only">80% Complete</span>
                                </div>
                            </div>
                        </li>
                        <li>
                            <label>Bandwidth <span>60%</span></label>
                            <div class="progress progress-xxs">
                                <div class="progress-bar progress-bar-primary" style="width: 60%">
                                    <span class="sr-only">60% Complete</span>
                                </div>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>
            <!-- /quick stats -->
            <div class="sidebar-category">
                <div class="category-title category-collapsed">
                    <span>更多选项</span>
                    <ul class="icons-list">
                        <li><a href="#" data-action="collapse"></a></li>
                    </ul>
                </div>
                <form action="#" class="category-content" style="display: none;">
                    {#                    <div class="form-group">
                                            <label>别名:</label>
                                            <input type="text" class="form-control" placeholder="">
                                        </div>#}
                    <div class="form-group">
                        <div class="checkbox checkbox-switchery checkbox-right switchery-xs ">
                            <label class="display-block">
                                <input type="checkbox" class="switchery switchery-primary" v-model="autoExcerpt">
                                自动摘要

                            </label>
                        </div>
                    </div>
                    <div class="form-group" v-if="!autoExcerpt">
                        <label>摘要:</label>
                        <textarea rows="3" cols="3" class="form-control" placeholder="编写摘要..."
                                  v-html="post.excerpt"></textarea>
                    </div>

                    {#
                    <label class="display-block">讨论</label>
                    <div class="form-group">
                        <div class="checkbox">
                            <label>
                                <div class="checker"><span><input type="checkbox" class="styled"></span></div>
                                允许评论
                            </label>
                        </div>

                        <div class="checkbox">
                            <label>
                                <div class="checker"><span class="checked"><input type="checkbox" class="styled" checked="checked"></span></div>
                                允许 Pingback 和 Trackback
                            </label>
                        </div>

                    </div>
                    #}
                </form>
            </div>

        </div>
    </div>
{% endblock %}


{% block script %}
    {#<script type="text/javascript" src="/static/assets/js/plugins/forms/styling/uniform.min.js"></script>#}

    {#<script type="text/javascript" src="/static/assets/js/plugins/editors/summernote/summernote.min.js"></script>#}
    {#<script type="text/javascript" src="/static/assets/js/plugins/editors/summernote/lang/summernote-zh-CN.js"></script>#}

    <script>
        //        var currentLocation = document.location.pathname + decodeURIComponent(document.location.search);

        //        console.log(currentLocation)
        //        if (currentLocation == url) {
        //            console.log("Refresh");
        //            $(window).trigger('statechange');
        //        } else {
        //            History.pushState(null, title, url);
        //        }
        //        var supports_pushState = 'pushState' in history;
        //        var last_state;
        //        function handle( state, type ) {
        //            if ( state !== last_state ) {
        //                last_state = state;
        //
        //                console.log('state: ' + state + ' (' + type + ')')
        //                // application code here
        ////                $('#log').append( 'state: ' + state + ' (' + type + ')<br>');
        //            }
        //        };
        //
        //        $(window)
        //            .bind( 'popstate', function(e){
        //                location.search.replace( /^\?/, '' )
        //                handle( location.search.replace( /^\?/, '' ), e.type );
        //            })
        //            .bind( 'hashchange', function(e){
        ////                location.hash.replace( /^#/, '' )
        //                handle( location.hash.replace( /^#/, '' ), e.type );
        //            })
        //            .trigger( supports_pushState ? 'popstate' : 'hashchange' );


        //        TITLE = '<$ post.title | safe $>';

        // @formatter:off
        POST = <$ post | dump | safe $>;
        // @formatter:on
    </script>
    {#<script type="text/javascript" src="/static/assets/js/plugins/ui/prism.min.js"></script>#}

    <script type="text/javascript" src="/static/components/post/index.js"></script>
    <script type="text/javascript">

        $(function () {
            // Switchery
            // ------------------------------

            // Initialize multiple switches
            if (Array.prototype.forEach) {
                var elems = Array.prototype.slice.call(document.querySelectorAll('.switchery'));
                elems.forEach(function (html) {
                    var switchery = new Switchery(html, {color: '#2196F3'});
                });
            }
            else {
                var elems = document.querySelectorAll('.switchery');
                for (var i = 0; i < elems.length; i++) {
                    var switchery = new Switchery(elems[i], {color: '#2196F3'});
                }
            }

        })
        // Load JSON data

        // Style checkboxes

        //        function nowTime() {
        //            var time = new Date();
        //             程序计时的月从0开始取值后+1
        //            var m = time.getMonth() + 1;
        //            var t = time.getFullYear() + "-" + m + "-"
        //                + time.getDate() + " " + time.getHours() + ":"
        //                + time.getMinutes() + ":" + time.getSeconds();
        //            return t;
        //        }
        // Default initialization
        //                $(".styled, .multiselect-container input").uniform({
        //                    radioClass: 'choice'
        //                });

    </script>


{% endblock %}

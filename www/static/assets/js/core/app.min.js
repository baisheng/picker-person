function getChildren(e){var a=[];return $(e).children("ul").children("li").each(function(){var e={};$(this).children("ul").children("li").length&&(e=getChildren(this));var t={id:$(this).data("id"),children:e};$(this).data("id")&&a.push(t)}),a}!function(e,a){"file:"===document.location.protocol&&alert("The HTML5 History API (and thus History.js) do not work on files, please upload it to a server.");var t=History.getState();History.log("initial:",t.data,t.title,t.url),History.Adapter.bind(e,"statechange",function(){var e=History.getState();History.log("statechange:",e.data,e.title,e.url)})}(window);var eventHub=new Vue;Vue.filter("lang",function(e,a){return lang.hasOwnProperty(e)?null!==a?lang[e]:void 0:e}),Vue.filter("moment",function(e,a){return moment.locale("zh-cn"),"default"===a?(a="YYYY-MM-DD HH:mm:ss",moment(e).format(a)):moment(e).fromNow()}),$(window).on("load",function(){$("body").removeClass("no-transitions")}),$(function(){function e(){null!==o&&o.masonry("layout")}function a(){var e=$(window).height()-$(".page-container").offset().top-$(".navbar-fixed-bottom").outerHeight();$(".page-container").attr("style","min-height:"+e+"px")}function t(e){var a=this;$.get(e).success(function(e){if(0===e.errno){if(e.data.url)new PNotify({icon:"icon-check",text:e.data.name+" 页面即将自动跳转~",addclass:"bg-success",type:"success"});else{var t="操作成功 ！";e.data.name&&(t=e.data.name),new PNotify({icon:"icon-check",text:t,addclass:"bg-success",type:"success"})}setTimeout(function(){e.data.url?location.href=e.data.url:$(a).hasClass("no-refresh")?toastr.clear():location.reload()},1500)}else new PNotify({title:"出错啦",icon:"icon-blocked",text:e.errmsg,addclass:"bg-danger",type:"danger"}),setTimeout(function(){e.data?location.href=e.data:toastr.clear()},1500)})}function n(){var e,a,t,n=$(this).attr("target-form"),o=this,i=!1;if("submit"==$(this).attr("type")||(e=$(this).attr("data-url")))if(t=$("."+n),"true"===$(this).attr("hide-data"))t=$(".hide-data"),a=t.serialize();else{if(void 0===t.get(0))return!1;if("FORM"==t.get(0).nodeName){if($('[data-validate="parsley"]')&&($('[data-validate="parsley"]').parsley().validate(),!0!==$('[data-validate="parsley"]').parsley().isValid()))return!1;$(this).hasClass("confirm")&&swal({title:"确定执行该操作 ?",type:"warning",confirmButtonColor:"#EF5350",showCancelButton:!0,confirmButtonText:"是!",cancelButtonText:"否, 返回!",closeOnConfirm:!1,closeOnCancel:!1,showLoaderOnConfirm:!0},function(n){return n?(e=void 0!==$(this).attr("url")?$(this).attr("url"):t.get(0).action,void(a=t.serialize())):(swal({title:"返回",text:"文件未改动,安全返回 :)",confirmButtonColor:"#2196F3",type:"success"}),!1)})}else"INPUT"==t.get(0).nodeName||"SELECT"==t.get(0).nodeName||"TEXTAREA"==t.get(0).nodeName?(t.each(function(e,a){"checkbox"===a.type&&a.checked===!0&&(i=!0)}),i&&$(this).hasClass("confirm")&&swal({title:"确定执行该操作 ?",type:"warning",confirmButtonColor:"#EF5350",showCancelButton:!0,confirmButtonText:"是!",cancelButtonText:"否, 返回!",closeOnConfirm:!1,closeOnCancel:!1,showLoaderOnConfirm:!0},function(e){if(!e)return swal({title:"返回",text:"文件未改动,安全返回 :)",confirmButtonColor:"#2196F3",type:"success"}),!1;if($(t).hasClass("sort")){var n=[];t.each(function(e,a){var t={};t.id=$(a).attr("data-id"),t.sort=$(a).val(),n.push(t)}),a={sort:JSON.stringify(n)}}else a=t.serialize()})):$(this).hasClass("confirm")&&swal({title:"确定执行该操作 ?",type:"warning",confirmButtonColor:"#EF5350",showCancelButton:!0,confirmButtonText:"是!",cancelButtonText:"否, 返回!",closeOnConfirm:!1,closeOnCancel:!1,showLoaderOnConfirm:!0},function(n){return n?(a=t.find("input,select,textarea").serialize(),$(o).addClass("disabled").attr("autocomplete","off").prop("disabled",!0),$.post(e,a).success(function(e){0===e.errno?(e.data.url?new PNotify({icon:"icon-check",text:e.data.name,addclass:"bg-success",type:"success"}):new PNotify({icon:"icon-check",text:e.data.name,addclass:"bg-teal-400",type:"success"}),setTimeout(function(){$(o).removeClass("disabled").prop("disabled",!1),e.data.url?location.href=e.data.url:$(o).hasClass("no-refresh")?toastr.clear():location.reload()},1500)):(1001==e.errno?$.each(e.errmsg,function(e,a){new PNotify({icon:"icon-alert",text:a,addclass:"bg-danger",type:"error"})}):new PNotify({icon:"icon-alert",text:e.errmsg,addclass:"bg-danger",type:"error"}),setTimeout(function(){$(o).removeClass("disabled").prop("disabled",!1),e.data?location.href=e.data:toastr.clear()},1500))}),void 0):(swal({title:"返回",text:"文件未改动,安全返回 :)",confirmButtonColor:"#2196F3",type:"success"}),!1)})}return!1}var o=$('[data-plugin="masonry"]');null!==o&&$(window).load(function(){o.masonry()}),$("body").addClass("no-transitions"),a(),$(".panel-footer").has("> .heading-elements:not(.not-collapsible)").prepend('<a class="heading-elements-toggle"><i class="icon-more"></i></a>'),$(".page-title, .panel-title").parent().has("> .heading-elements:not(.not-collapsible)").children(".page-title, .panel-title").append('<a class="heading-elements-toggle"><i class="icon-more"></i></a>'),$(".page-title .heading-elements-toggle, .panel-title .heading-elements-toggle").on("click",function(){$(this).parent().parent().toggleClass("has-visible-elements").children(".heading-elements").toggleClass("visible-elements")}),$(".panel-footer .heading-elements-toggle").on("click",function(){$(this).parent().toggleClass("has-visible-elements").children(".heading-elements").toggleClass("visible-elements")}),$(".breadcrumb-line").has(".breadcrumb-elements").prepend('<a class="breadcrumb-elements-toggle"><i class="icon-menu-open"></i></a>'),$(".breadcrumb-elements-toggle").on("click",function(){$(this).parent().children(".breadcrumb-elements").toggleClass("visible-elements")}),$(document).on("click",".dropdown-content",function(e){e.stopPropagation()}),$(".navbar-nav .disabled a").on("click",function(e){e.preventDefault(),e.stopPropagation()}),$('.dropdown-content a[data-toggle="tab"]').on("click",function(e){$(this).tab("show")}),$(".panel [data-action=reload]").click(function(e){e.preventDefault();var a=$(this).parent().parent().parent().parent().parent();$(a).block({message:'<i class="icon-spinner2 spinner"></i>',overlayCSS:{backgroundColor:"#fff",opacity:.8,cursor:"wait","box-shadow":"0 0 0 1px #ddd"},css:{border:0,padding:0,backgroundColor:"none"}}),window.setTimeout(function(){$(a).unblock()},2e3)}),$(".category-title [data-action=reload]").click(function(e){e.preventDefault();var a=$(this).parent().parent().parent().parent();$(a).block({message:'<i class="icon-spinner2 spinner"></i>',overlayCSS:{backgroundColor:"#000",opacity:.5,cursor:"wait","box-shadow":"0 0 0 1px #000"},css:{border:0,padding:0,backgroundColor:"none",color:"#fff"}}),window.setTimeout(function(){$(a).unblock()},2e3)}),$(".sidebar-default .category-title [data-action=reload]").click(function(e){e.preventDefault();var a=$(this).parent().parent().parent().parent();$(a).block({message:'<i class="icon-spinner2 spinner"></i>',overlayCSS:{backgroundColor:"#fff",opacity:.8,cursor:"wait","box-shadow":"0 0 0 1px #ddd"},css:{border:0,padding:0,backgroundColor:"none"}}),window.setTimeout(function(){$(a).unblock()},2e3)}),$(".category-collapsed").children(".category-content").hide(),$(".category-collapsed").find("[data-action=collapse]").addClass("rotate-180"),$(".category-title [data-action=collapse]").click(function(e){e.preventDefault();var t=$(this).parent().parent().parent().nextAll();$(this).parents(".category-title").toggleClass("category-collapsed"),$(this).toggleClass("rotate-180"),a(),t.slideToggle(150)}),$(".panel-collapsed").children(".panel-heading").nextAll().hide(),$(".panel-collapsed").find("[data-action=collapse]").addClass("rotate-180"),$(".panel [data-action=collapse]").click(function(e){e.preventDefault();var t=$(this).parent().parent().parent().parent().nextAll();$(this).parents(".panel").toggleClass("panel-collapsed"),$(this).toggleClass("rotate-180"),a(),t.slideToggle(150)}),$(".panel [data-action=close]").click(function(e){e.preventDefault();var t=$(this).parent().parent().parent().parent().parent();a(),t.slideUp(150,function(){$(this).remove()})}),$(".category-title [data-action=close]").click(function(e){e.preventDefault();var t=$(this).parent().parent().parent().parent();a(),t.slideUp(150,function(){$(this).remove()})}),$(".navigation").find("li.active").parents("li").addClass("active"),$(".navigation").find("li").not(".active, .category-title").has("ul").children("ul").addClass("hidden-ul"),$(".navigation").find("li").has("ul").children("a").addClass("has-ul"),$(".navigation-topic").find("li").has("ul").children("a").addClass("has-ul"),$(".dropdown-menu:not(.dropdown-content), .dropdown-menu:not(.dropdown-content) .dropdown-submenu").has("li.active").addClass("active").parents(".navbar-nav .dropdown:not(.language-switch), .navbar-nav .dropup:not(.language-switch)").addClass("active"),$(".navigation-main > .navigation-header > i").tooltip({placement:"right",container:"body"}),$(".navigation-main").find("li").has("ul").children("a").on("click",function(e){e.preventDefault(),$(this).parent("li").not(".disabled").not($(".sidebar-xs").not(".sidebar-xs-indicator").find(".navigation-main").children("li")).toggleClass("active").children("ul").slideToggle(250),$(".navigation-main").hasClass("navigation-accordion")&&$(this).parent("li").not(".disabled").not($(".sidebar-xs").not(".sidebar-xs-indicator").find(".navigation-main").children("li")).siblings(":has(.has-ul)").removeClass("active").children("ul").slideUp(250)}),$(".navigation-alt").find("li").has("ul").children("a").on("click",function(e){e.preventDefault(),$(this).parent("li").not(".disabled").toggleClass("active").children("ul").slideToggle(200),$(".navigation-alt").hasClass("navigation-accordion")&&$(this).parent("li").not(".disabled").siblings(":has(.has-ul)").removeClass("active").children("ul").slideUp(200)}),$(".sidebar-main-toggle").on("click",function(a){a.preventDefault(),$("body").toggleClass("sidebar-xs"),e()}),$(document).on("click",".navigation .disabled a",function(e){e.preventDefault()}),$(document).on("click",".sidebar-control",function(e){a()}),$(document).on("click",".sidebar-main-hide",function(a){a.preventDefault(),$("body").toggleClass("sidebar-main-hidden"),e()}),$(document).on("click",".sidebar-secondary-hide",function(a){a.preventDefault(),$("body").toggleClass("sidebar-secondary-hidden"),e()}),$(document).on("click",".sidebar-detached-hide",function(a){a.preventDefault(),$("body").toggleClass("sidebar-detached-hidden"),e()}),$(document).on("click",".sidebar-all-hide",function(a){a.preventDefault(),$("body").toggleClass("sidebar-all-hidden"),e()}),$(document).on("click",".sidebar-opposite-toggle",function(e){e.preventDefault(),$("body").toggleClass("sidebar-opposite-visible"),$("body").hasClass("sidebar-opposite-visible")?($("body").addClass("sidebar-xs"),$(".navigation-main").children("li").children("ul").css("display","")):$("body").removeClass("sidebar-xs")}),$(document).on("click",".sidebar-opposite-main-hide",function(a){a.preventDefault(),$("body").toggleClass("sidebar-opposite-visible"),e(),$("body").hasClass("sidebar-opposite-visible")?($("body").addClass("sidebar-main-hidden"),e()):($("body").removeClass("sidebar-main-hidden"),e())}),$(document).on("click",".sidebar-opposite-secondary-hide",function(a){a.preventDefault(),$("body").toggleClass("sidebar-opposite-visible"),$("body").hasClass("sidebar-opposite-visible")?($("body").addClass("sidebar-secondary-hidden"),e()):$("body").removeClass("sidebar-secondary-hidden")}),$(document).on("click",".sidebar-opposite-hide",function(e){e.preventDefault(),$("body").toggleClass("sidebar-all-hidden"),$("body").hasClass("sidebar-all-hidden")?($("body").addClass("sidebar-opposite-visible"),$(".navigation-main").children("li").children("ul").css("display","")):$("body").removeClass("sidebar-opposite-visible")}),$(document).on("click",".sidebar-opposite-fix",function(a){a.preventDefault(),$("body").toggleClass("sidebar-opposite-visible"),e()}),$(".sidebar-mobile-main-toggle").on("click",function(e){e.preventDefault(),$("body").toggleClass("sidebar-mobile-main").removeClass("sidebar-mobile-secondary sidebar-mobile-opposite sidebar-mobile-detached")}),$(".sidebar-mobile-secondary-toggle").on("click",function(e){e.preventDefault(),$("body").toggleClass("sidebar-mobile-secondary").removeClass("sidebar-mobile-main sidebar-mobile-opposite sidebar-mobile-detached")}),$(".sidebar-mobile-opposite-toggle").on("click",function(e){e.preventDefault(),$("body").toggleClass("sidebar-mobile-opposite").removeClass("sidebar-mobile-main sidebar-mobile-secondary sidebar-mobile-detached")}),$(".sidebar-mobile-detached-toggle").on("click",function(e){e.preventDefault(),$("body").toggleClass("sidebar-mobile-detached").removeClass("sidebar-mobile-main sidebar-mobile-secondary sidebar-mobile-opposite")}),$(window).on("resize",function(){setTimeout(function(){a(),$(window).width()<=768?($("body").addClass("sidebar-xs-indicator"),$(".sidebar-opposite").insertBefore(".content-wrapper"),$(".sidebar-detached").insertBefore(".content-wrapper"),$(".dropdown-submenu").on("mouseenter",function(){$(this).children(".dropdown-menu").addClass("show")}).on("mouseleave",function(){$(this).children(".dropdown-menu").removeClass("show")}),e()):($("body").removeClass("sidebar-xs-indicator"),$(".sidebar-opposite").insertAfter(".content-wrapper"),$("body").removeClass("sidebar-mobile-main sidebar-mobile-secondary sidebar-mobile-detached sidebar-mobile-opposite"),$("body").hasClass("has-detached-left")?$(".sidebar-detached").insertBefore(".container-detached"):$("body").hasClass("has-detached-right")&&$(".sidebar-detached").insertAfter(".container-detached"),$(".page-header-content, .panel-heading, .panel-footer").removeClass("has-visible-elements"),$(".heading-elements").removeClass("visible-elements"),$(".dropdown-submenu").children(".dropdown-menu").removeClass("show"),e())},100)}).resize(),$('[data-popup="popover"]').popover(),$('[data-popup="tooltip"]').tooltip();var i="is-visible";$("input:not(.token-input):not(.bootstrap-tagsinput > input), textarea, select").on("checkval change",function(){var e=$(this).parents(".form-group-material").children(".control-label");""!==this.value?e.addClass(i):e.removeClass(i).addClass("animate")}).on("keyup",function(){$(this).trigger("checkval")}).trigger("checkval").trigger("change"),$(document).on("change",'table thead [type="checkbox"]',function(e){e.preventDefault();var a=$(e.target).closest("table"),t=$(e.target).is(":checked");$('tbody [type="checkbox"]',a).prop("checked",t)}),$(document).on("click",".ajax-get",function(){var e=$(this).attr("data-url");return $(this).hasClass("confirm")?void swal({title:"确定执行该操作 ?",type:"warning",confirmButtonColor:"#EF5350",showCancelButton:!0,confirmButtonText:"是!",cancelButtonText:"否, 返回!",closeOnConfirm:!1,closeOnCancel:!1,showLoaderOnConfirm:!0},function(a){return a?void t(e):(swal({title:"返回",text:"文件未改动,安全返回 :)",confirmButtonColor:"#2196F3",type:"success"}),!1)}):(t(e),!1)}),$(document).on("click",".ajax-post",n),$(document).on("click",'[data-toggle="ajaxModal"]',function(e){$("#ajax_modal").remove(),e.preventDefault();var a=$(this),t=a.data("remote")||a.attr("href"),n=$('<div class="modal fade " data-backdrop="static" id="ajax_modal"><div class="modal-body"></div></div>');$("body").append(n),n.modal(),n.load(t)}),$(document).on("click.button.data-api","[data-loading-text]",function(e){var a=$(e.target);a.is("i")&&(a=a.parent()),a.button("loading")}),$(".select").select2({minimumResultsForSearch:1/0})});